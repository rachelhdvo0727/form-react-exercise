{"version":3,"sources":["modules/vars.js","script.js"],"names":["endpoint","apiKey","form","document","querySelector","pattern","content","elms","elements","formElms","querySelectorAll","window","addEventListener","start","evt","classList","remove","add","setAttribute","checkInfo","autoFillInfo","get","preventDefault","forEach","elm","checkValidity","validForm","post","first_name","fstname","value","last_name","lstname","age","email","reset","unknownDOB","dob","disabled","e","ageStr","ageNum","parseInt","currentYr","innerHTML","fetch","method","headers","accept","then","json","data","showFriends","showData","friend","display","clone","cloneNode","textContent","dataset","id","_id","deleteAFriend","appendChild","postData","JSON","stringify","body","res"],"mappings":"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","file":"script.75da7f30.js","sourceRoot":"..","sourcesContent":["export const endpoint = \"https://frontendspring20-e4cd.restdb.io/rest/friends\";\nexport const apiKey = \"5e956ffd436377171a0c230f\";\nexport const form = document.querySelector(\"form\");\nexport const pattern = document.querySelector(\"template\").content;\nexport const elms = form.elements;\nexport const formElms = form.querySelectorAll(\"input\");\n","\"use strict\";\nwindow.addEventListener(\"DOMContentLoaded\", start);\nimport {\n  endpoint,\n  apiKey,\n  form,\n  pattern,\n  elms,\n  formElms,\n} from \"./modules/vars\";\nfunction start() {\n  document.querySelector(\".add\").addEventListener(\"click\", (evt) => {\n    form.classList.remove(\"hidden\");\n    document.querySelector(\"main\").classList.add(\"blurBg\");\n  });\n  document.querySelector(\".cancel\").addEventListener(\"click\", () => {\n    form.classList.add(\"hidden\");\n    document.querySelector(\"main\").classList.remove(\"blurBg\");\n  });\n  form.setAttribute(\"novalidate\", true);\n  checkInfo();\n  autoFillInfo();\n  get();\n}\nfunction checkInfo() {\n  form.addEventListener(\"submit\", (evt) => {\n    evt.preventDefault(); //turn off validation on submit\n    formElms.forEach((elm) => {\n      elm.classList.remove(\"invalid\");\n    });\n\n    if (form.checkValidity() && validForm) {\n      //send data\n      post({\n        first_name: elms.fstname.value,\n        last_name: elms.lstname.value,\n        age: elms.age.value,\n        email: elms.email.value,\n      });\n      form.classList.add(\"hidden\");\n      form.reset();\n    } else {\n      //loop validity\n      formElms.forEach((elm) => {\n        elm.classList.remove(\"invalid\");\n        if (!elm.checkValidity()) {\n          elm.classList.add(\"invalid\");\n        }\n      });\n    }\n  });\n}\nfunction autoFillInfo() {\n  elms.unknownDOB.addEventListener(\"click\", (evt) => {\n    elms.dob.disabled = !elms.dob.disabled;\n    elms.age.disabled = !elms.age.disabled;\n  });\n  elms.dob.addEventListener(\"change\", (e) => {\n    let ageStr = elms.dob.value;\n    let ageNum = parseInt(ageStr);\n    let currentYr = 2020;\n    elms.age.value = currentYr - ageNum;\n  });\n}\nfunction get() {\n  document.querySelector(\"main\").innerHTML = \"\";\n  fetch(endpoint, {\n    method: \"get\",\n    headers: {\n      accept: \"application/json\",\n      \"x-apikey\": apiKey,\n      \"cache-control\": \"no-cache\",\n    },\n  })\n    .then((e) => e.json())\n    .then((data) => data.forEach(showFriends));\n}\n\nfunction showData(e) {\n  e.forEach(showFriends);\n}\n\nfunction showFriends(friend) {\n  const display = document.querySelector(\"main\");\n  const clone = pattern.cloneNode(true);\n  clone.querySelector(\".first\").textContent = friend.first_name;\n  clone.querySelector(\".last\").textContent = friend.last_name;\n  clone.querySelector(\".email\").textContent = friend.email;\n  clone.querySelector(\".age\").textContent = friend.age;\n  //clone.querySelector(\"button\").dataset.id = friend._id;\n  clone\n    .querySelectorAll(`article, button[data-action=\"delete\"]`)\n    .forEach((elm) => (elm.dataset.id = friend._id));\n  clone\n    .querySelector(`[data-action=\"delete\"]`)\n    .addEventListener(\"click\", (elm) => deleteAFriend(friend._id));\n  display.appendChild(clone);\n}\nfunction post(data) {\n  const postData = JSON.stringify(data);\n  fetch(endpoint, {\n    method: \"post\",\n    headers: {\n      \"Content-Type\": \"application/json; charset=utf-8\",\n      \"x-apikey\": apiKey,\n      \"cache-control\": \"no-cache\",\n    },\n    body: postData,\n  })\n    .then((res) => res.json())\n    .then((data) => showFriends(data));\n}\n\nfunction deleteAFriend(id) {\n  document.querySelector(`article[data-id=\"${id}\"]`).remove();\n  fetch(`${endpoint}/${id}`, {\n    method: \"delete\",\n    headers: {\n      \"Content-Type\": \"application/json; charset=utf-8\",\n      \"x-apikey\": apiKey,\n      \"cache-control\": \"no-cache\",\n    },\n  })\n    .then((res) => res.json())\n    .then((data) => {});\n}\n"]}