{"version":3,"sources":["modules/vars.js","script.js"],"names":["endpoint","apiKey","form","document","querySelector","pattern","content","elms","elements","formElms","querySelectorAll","validForm","window","addEventListener","start","evt","classList","remove","add","setAttribute","checkInfo","autoFillInfo","get","preventDefault","forEach","elm","checkValidity","post","first_name","fstname","value","last_name","lstname","age","email","reset","unknownDOB","dob","disabled","e","ageStr","ageNum","parseInt","currentYr","innerHTML","fetch","method","headers","accept","then","json","showData","showFriends","friend","display","clone","cloneNode","textContent","dataset","id","_id","deleteAFriend","appendChild","data","postData","JSON","stringify","body","res"],"mappings":"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","file":"script.75da7f30.js","sourceRoot":"..","sourcesContent":["export const endpoint = \"https://frontendspring20-e4cd.restdb.io/rest/friends\";\nexport const apiKey = \"5e956ffd436377171a0c230f\";\nexport const form = document.querySelector(\"form\");\nexport const pattern = document.querySelector(\"template\").content;\nexport const elms = form.elements;\nexport const formElms = form.querySelectorAll(\"input\");\nexport let validForm = true;\n","\"use strict\";\nwindow.addEventListener(\"DOMContentLoaded\", start);\nimport {\n  endpoint,\n  apiKey,\n  form,\n  pattern,\n  elms,\n  formElms,\n} from \"./modules/vars\";\n\nfunction start() {\n  document.querySelector(\".add\").addEventListener(\"click\", (evt) => {\n    form.classList.remove(\"hidden\");\n    document.querySelector(\"main\").classList.add(\"blurBg\");\n  });\n  document.querySelector(\".cancel\").addEventListener(\"click\", () => {\n    form.classList.add(\"hidden\");\n    document.querySelector(\"main\").classList.remove(\"blurBg\");\n  });\n  form.setAttribute(\"novalidate\", true);\n  checkInfo();\n  autoFillInfo();\n  get();\n}\nfunction checkInfo() {\n  form.addEventListener(\"submit\", (evt) => {\n    evt.preventDefault(); //turn off validation on submit\n    formElms.forEach((elm) => {\n      elm.classList.remove(\"invalid\");\n    });\n\n    if (form.checkValidity() && validForm) {\n      //send data\n      post({\n        first_name: elms.fstname.value,\n        last_name: elms.lstname.value,\n        age: elms.age.value,\n        email: elms.email.value,\n      });\n      form.classList.add(\"hidden\");\n      form.reset();\n    } else {\n      //loop validity\n      formElms.forEach((elm) => {\n        elm.classList.remove(\"invalid\");\n        if (!elm.checkValidity()) {\n          elm.classList.add(\"invalid\");\n        }\n      });\n    }\n  });\n}\nfunction autoFillInfo() {\n  elms.unknownDOB.addEventListener(\"click\", (evt) => {\n    elms.dob.disabled = !elms.dob.disabled;\n    elms.age.disabled = !elms.age.disabled;\n  });\n  elms.dob.addEventListener(\"change\", (e) => {\n    let ageStr = elms.dob.value;\n    let ageNum = parseInt(ageStr);\n    let currentYr = 2020;\n    elms.age.value = currentYr - ageNum;\n  });\n}\nfunction get() {\n  document.querySelector(\"main\").innerHTML = \"\";\n  fetch(endpoint, {\n    method: \"get\",\n    headers: {\n      accept: \"application/json\",\n      \"x-apikey\": apiKey,\n      \"cache-control\": \"no-cache\",\n    },\n  })\n    .then((e) => e.json())\n    .then(showData);\n}\n\nfunction showData(e) {\n  e.forEach(showFriends);\n}\n\nfunction showFriends(friend) {\n  const display = document.querySelector(\"main\");\n  const clone = pattern.cloneNode(true);\n  clone.querySelector(\".first\").textContent = friend.first_name;\n  clone.querySelector(\".last\").textContent = friend.last_name;\n  clone.querySelector(\".email\").textContent = friend.email;\n  clone.querySelector(\".age\").textContent = friend.age;\n  //clone.querySelector(\"button\").dataset.id = friend._id;\n  clone\n    .querySelectorAll(`article, button[data-action=\"delete\"]`)\n    .forEach((elm) => (elm.dataset.id = friend._id));\n  clone\n    .querySelector(`[data-action=\"delete\"]`)\n    .addEventListener(\"click\", (elm) => deleteAFriend(friend._id));\n  display.appendChild(clone);\n}\nfunction post(data) {\n  const postData = JSON.stringify(data);\n  fetch(endpoint, {\n    method: \"post\",\n    headers: {\n      \"Content-Type\": \"application/json; charset=utf-8\",\n      \"x-apikey\": apiKey,\n      \"cache-control\": \"no-cache\",\n    },\n    body: postData,\n  })\n    .then((res) => res.json())\n    .then((data) => showFriends(data));\n}\n\nfunction deleteAFriend(id) {\n  document.querySelector(`article[data-id=\"${id}\"]`).remove();\n  fetch(`${endpoint}/${id}`, {\n    method: \"delete\",\n    headers: {\n      \"Content-Type\": \"application/json; charset=utf-8\",\n      \"x-apikey\": apiKey,\n      \"cache-control\": \"no-cache\",\n    },\n  })\n    .then((res) => res.json())\n    .then((data) => { });\n}\n"]}